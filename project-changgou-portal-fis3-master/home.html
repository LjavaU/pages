<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE">
	<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
	<title>我的账户</title>
	<link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" type="text/css" href="css/all.css" />
    <link rel="stylesheet" type="text/css" href="css/pages-home.css" />
	<script src="js/vue.js"></script>
	<script src="js/axios.js"></script>
	<!-- 引入样式 -->
	<link rel="stylesheet" href="elementui/index.css">
	<script src="elementui/index.js"></script>
	<script src="js/mobile.js"></script>
	<script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
	<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="js/common.js"></script>
	<style>
		.avatar-uploader .el-upload {
			border: 1px dashed #d9d9d9;
			border-radius: 6px;
			cursor: pointer;
			position: relative;
			overflow: hidden;
		}
		.avatar-uploader .el-upload:hover {
			border-color: #409EFF;
		}
		.avatar-uploader-icon {
			font-size: 28px;
			color: #8c939d;
			width: 178px;
			height: 178px;
			line-height: 178px;
			text-align: center;
		}
		.avatar {
			width: 178px;
			height: 178px;
			display: block;
		}
	</style>

</head>

<body>
	<!-- 头部栏位 -->
	<!--页面顶部-->
<div id="nav-bottom">
	<!--顶部-->
	<div class="nav-top">
		<div class="top">
			<div class="py-container">
				<div class="shortcut">
					<ul class="fl">
						<li class="f-item">青橙欢迎您！</li>
						<li class="f-item">请<a href="login.html" target="_blank">登录</a>　<span><a href="register.html" target="_blank">免费注册</a></span></li>
					</ul>
					<div class="fr typelist">
						<ul class="types">
							<li class="f-item"><span>我的订单</span></li>
							
							<li class="f-item"><span><a href="cart.html" target="_blank">我的购物车</a></span></li>
							<li class="f-item"><span><a href="home.html" target="_blank">我的青橙</a></span></li>			
							<li class="f-item"><span>青橙会员</span></li>						
							<li class="f-item"><span>企业采购</span></li>						
							<li class="f-item"><span>关注青橙</span></li>
							<li class="f-item"><span><a href="cooperation.html" target="_blank">合作招商</a></span></li>
							<li class="f-item"><span><a href="shoplogin.html" target="_blank">商家后台</a></span></li>				
							<li class="f-item"><span>网站导航</span></li>
						</ul>
					</div>
					
				</div>
			</div>
		</div>

		<!--头部-->
		<div class="header">
			<div class="py-container">
				<div class="yui3-g Logo">
					<div class="yui3-u Left logoArea">
						<a class="logo-bd" title="青橙" href="index.html" target="_blank"></a>
					</div>
					<div class="yui3-u Rit searchArea">
						<div class="search">
							<form action="" class="sui-form form-inline">
								<!--searchAutoComplete-->
								<div class="input-append">
									<input type="text" id="autocomplete" class="input-error input-xxlarge" />
									<button class="sui-btn btn-xlarge btn-danger" type="button">搜索</button>
								</div>
							</form>
						</div>
					</div>
					
				</div>

			</div>
		</div>
	</div>
</div>

	<!--header-->
	<div id="account">
		<div class="py-container" id="app">
			<div class="yui3-g home">
				<!--左侧列表-->
				<div class="yui3-u-1-6 list">
					<dl>
						<dt><i>·</i> 订单中心</dt>
						<dd><a href="/myOrder.html"  target="_blank">我的订单</a></dd>
						<dd>团购订单</dd>
						<dd>本地生活订单 </dd>
						<dd>我的预售</dd>
						<dd>评价晒单</dd>
						<dd>取消订单记录</dd>
					</dl>
					<dl>
						<dt><i>·</i> 关注中心</dt>
						<dd>关注的商品 </dd>
						<dd>关注的店铺</dd>
						<dd>关注的专辑 </dd>
						<dd>关注的品牌</dd>
						<dd>关注的活动 </dd>
						<dd>浏览历史</dd>
					</dl>
					<dl>
						<dt><i>·</i> 特色业务</dt>
						<dd>我的营业厅 </dd>
						<dd>京东通信 </dd>
						<dd>定期送 </dd>
						<dd>京东代下单</dd>
						<dd>我的回收单 </dd>
						<dd>节能补贴</dd>
						<dd>医药服务 </dd>
						<dd>流量加油站 </dd>
						<dd>黄金托管</dd>
					</dl>
					<dl>
						<dt><i>·</i> 客户服务</dt>
						<dd>返修退换货 </dd>
						<dd>价格保护 </dd>
						<dd>意见建议 </dd>
						<dd>购买咨询 </dd>
						<dd>交易纠纷 </dd>
						<dd>我的发票</dd>
					</dl>
					<dl>
						<dt><i>·</i> 设置</dt>
						<dd><a href="#person" @click="handleCreate()">个人信息</a> </dd>
						<dd><a href="addressList.html" target="_blank">收货地址</a> </dd>
						<dd><a href="#modify_password"  @click="modifypassword()">修改密码</a> </dd>
					</dl>
				</div>
				<!--右侧主内容-->
				<div class="yui3-u-5-6 body">
					<div class="aboutme yui3-g">
						<div class="yui3-u-1-4 set info">
							<div class="u-pic">
								<img src="img/photo.png" alt="用户头像" />
							</div>
							<div class="u-info">
								<div class="u-name">小蜻蜓</div>
								<div class="u-rank">VIP俱乐部</div>
								<div class="u-safe">账号安全：</div>
								<div class="u-medal">我的勋章</div>
							</div>
						</div>
						<div class="yui3-u-1-4 set fixed">
							<div class="title"><strong>我的资产</strong></div>
							<div class="acc-item">
								<div class="list1">
									<i></i><b>积分兑换商品</b><span><em>0</em>分</span>
								</div>
								<div class="list2">
									<i></i><b>抵用券</b><span><em>0</em>分</span>
								</div>
								<div class="list3">
									<i></i><b>礼品卡余额</b><span><em>0</em>分</span>
								</div>
								<div class="list4">
									<i></i><b>账号余额</b><span><em>0</em>分</span>
								</div>
							</div>
						</div>
						<div class="yui3-u-1-4 set package">
							<div class="title"><strong>我的钱包</strong></div>
							<div class="td">
								<ul class="yui3-g">
									<li class="yui3-u-1-2">
										<span>能购物</span>
										<div class="td1"></div>
									</li>
									<li class="yui3-u-1-2">
										<span>高收益</span>
										<div class="td2"></div>
									</li>
									<li class="yui3-u-1-2">
										<span>够安全</span>
										<div class="td3"></div>
									</li>
									<li class="yui3-u-1-2">
										<span>够灵活</span>
										<div class="td4"></div>
									</li>
								</ul>
								<div class="space-x"></div>
								<div class="space-y"></div>
							</div>
						</div>
						<div class="yui3-u-5-24 ads">
							<img src="img/account.png" />
						</div>
					</div>
					<div class="order">
						<div class="mt">
							<span class="fl"><strong>全部订单　<i>0</i></strong></span>
							<div class="fr">
								<a href="#">我的订单 > </a>
							</div>
						</div>
						<div class="order-detail">
							<span class="none">您还没有订单，继续逛逛吧！</span>
						</div>
					</div>
					<div class="discount yui3-g">
						<div class="yui3-u-1-3 minus">
							<div class="title"><span><strong>优惠券</strong></span></div>
							<div class="quan">
								<div id="myCarousel" data-ride="carousel" data-interval="4000" class="sui-carousel slide">
									<div class="carousel-inner">
										<div class="active item">
											<img src="img/quan.png" />
										</div>
										<div class="item">
											<img src="img/quan.png" />
										</div>
										<div class="item">
											<img src="img/quan.png" />
										</div>
									</div>
									<a href="#myCarousel" data-slide="prev" class="carousel-control left">‹</a>
									<a href="#myCarousel" data-slide="next" class="carousel-control right">›</a>
								</div>
							</div>
						</div>
						<div class="yui3-u-1-3 change">
							<div class="title"><span><strong>积分兑换</strong></span></div>
							<div class="jifen">
								<div class="fl"><img src="img/duihuan.png" /></div>
								<div class="fr">
									<span>FancyFeast珍致 猫头鹰 精选金枪鱼肉配人工蟹肉条</span><br />
									<span class="fen"><i>1000</i>积分</span>
								</div>
							</div>
							<div class="fr dui">
								<a href="javascript:void(0)">立即兑换>></a>
							</div>
						</div>
						<div class="yui3-u-1-3 charge">
							<div class="title"><span><strong>立即充值</strong></span></div>
							<div class="chong">
								<form class="sui-form form-horizontal">
									<div class="control-group">
										<label for="inputPhone" class="control-label">手机号码：</label>
										<div class="controls">
											<input type="text" id="inputPhone" placeholder="请输入手机号码">
										</div>
									</div>
									<div class="control-group">
										<label for="inputPrice" class="control-label">面值：</label>
										<div class="controls">
											<span class="sui-dropdown dropdown-bordered select"><span class="dropdown-inner"><a id="drop12" role="button" data-toggle="dropdown" href="#" class="dropdown-toggle">
                        <input value="hz" name="city" type="hidden"><i class="caret"></i><span>100</span></a>
											<ul id="menu12" role="menu" aria-labelledby="drop12" class="sui-dropdown-menu">
												<li role="presentation">
													<a role="menuitem" tabindex="-1" href="javascript:void(0);" value="bj">50</a>
												</li>
												<li role="presentation">
													<a role="menuitem" tabindex="-1" href="javascript:void(0);" value="sb">30</a>
												</li>
												<li role="presentation" class="active">
													<a role="menuitem" tabindex="-1" href="javascript:void(0);" value="hz">100</a>
												</li>
											</ul>
											</span>
											</span>
										</div>
									</div>
									<div class="control-group">
										<label class="control-label">&nbsp;</label>
										<button type="submit" class="sui-btn btn-primary">立即充值</button>
									</div>
								</form>
							</div>
						</div>
					</div>
					<div class="ever" >
						<ul class="sui-nav nav-tabs">
							<li class="active">
								<a href="#collect" @click="userCollect" data-toggle="tab">商品收藏</a>
							</li>
							<li >
								<a href="#profile" @click="footPrint" data-toggle="tab">购物踪迹</a>
							</li>
						</ul>
						<div class="clearfix"></div>
						<div class="tab-content" >
							<div id="collect" class="tab-pane active">
								<div class="like-list">
									<ul class="yui3-g">
										<li class="yui3-u-1-4" v-for="c in collects">
											<div class="list-wrap">
												<div class="p-img">
													<a :href="'/api/items/'+c.spuId"><img :src="c.image" /></a>
												</div>
												<div class="attr">
													<em>{{c.name}}</em>
												</div>
												<div class="price">
													<strong>
											<em>¥</em>
											<i>{{c.price}}</i>
										</strong>
												</div>
												<div class="commit">
													<i class="command">已有{{c.commentNum}}人评价</i>
												</div>
											</div>
										</li>

									</ul>
								</div>
								<div class="pagination-container">
									<el-pagination
											class="pagiantion"
											@current-change="handleCurrentChange"
											:current-page="pagination.currentPage"
											:page-size="pagination.pageSize"
											layout="total, prev, pager, next, jumper"
											:total="pagination.total">
									</el-pagination>
								</div>
							</div>
							<div id="profile" class="tab-pane">
								<div class="like-list">
									<ul class="yui3-g">
										<li class="yui3-u-1-4" v-for="p in profiles">
											<div class="list-wrap">
												<div class="p-img">
													<img :src="p.image" />
												</div>
												<div class="attr">
													<em>{{p.name}}</em>
												</div>
												<div class="price">
													<strong>
														<em>¥</em>
														<i>{{p.price}}</i>
													</strong>
												</div>
												<div class="commit">
													<i class="command">已有{{p.commentNum}}人评价</i>
												</div>
											</div>
										</li>

									</ul>
								</div>
								<div class="pagination-container">
									<el-pagination
											class="pagiantion"
											@current-change="handleCurrentChange2"
											:current-page="pagination.currentPage"
											:page-size="pagination.pageSize"
											layout="total, prev, pager, next, jumper"
											:total="pagination.total">
									</el-pagination>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- 个人信息编辑标签弹层 -->
			<div class="add-form">
				<el-dialog title="修改/查看个人信息" :visible.sync="dialogFormVisible4Edit">
					<el-form ref="dataEditForm" :model="formData" :rules="rules" label-position="right" label-width="100px">
						<el-row>
							<el-col :span="12">
								<el-form-item label="真实姓名:" prop="username">
									<el-input v-model="formData.username"/>
								</el-form-item>
							</el-col>
						</el-row>
						<el-row>
							<el-col :span="12">
								<el-form-item label="昵称:" prop="nickName">
									<el-input @blur="findNickName"  v-model="formData.nickName"/>
								</el-form-item>
							</el-col>
						</el-row>
						<el-row>
							<el-col :span="12">
								<el-form-item label="性别" prop="sex">
									<el-select v-model="formData.sex">
										<el-option label="男" value="1"></el-option>
										<el-option label="女" value="2"></el-option>
									</el-select>
								</el-form-item>
							</el-col>
						</el-row>
						<el-row>
							<el-col :span="12">
								<el-form-item label="QQ:" >
									<el-input v-model="formData.qq"/>
								</el-form-item>
							</el-col>
						</el-row>
						<el-row>
							<el-col :span="12">
								<el-form-item label="出生年月:" prop="birthday">
									<el-date-picker
											v-model="formData.birthday"
											type="datetime"
											placeholder="选择出生日期"
									        format="yyyy-MM-dd">
									</el-date-picker>
								</el-form-item>
							</el-col>
						</el-row>
						<el-row>
							<el-col :span="24">
								<el-form-item label="上传/修改图像">
									<el-upload
											class="avatar-uploader"
											action="/upload"
											:auto-upload="autoUpload"
											name="file"
											:show-file-list="false"
											:on-success="handleAvatarSuccess"
											:before-upload="beforeAvatarUpload">
										<img v-if="imageUrl" :src="imageUrl" class="avatar">
										<i v-else class="el-icon-plus avatar-uploader-icon"></i>
									</el-upload>
								</el-form-item>
							</el-col>
						</el-row>

					</el-form>
					<div slot="footer" class="dialog-footer">
						<el-button @click="dialogFormVisible4Edit = false">取消</el-button>
						<el-button type="primary" @click="handleEdit()">修改</el-button>
					</div>
				</el-dialog>
			</div>

			<!-- 修改密码标签弹层 -->
			<div class="add-form">
				<el-dialog title="重置密码" :visible.sync="dialogFormVisible4Editpwd">
					<el-form ref="pwdEditForm" :model="pwdformData" :rules="pwdrules" label-position="right" label-width="100px">
						<el-row>
							<el-col :span="12">
								<el-form-item label="用户名:" >
									<el-input v-model="pwdformData.username" :disabled="true"/>
								</el-form-item>
							</el-col>
						</el-row>
						<el-row>
							<el-col :span="12">
								<el-form-item label="手机号:" >
									<el-input v-model="pwdformData.phone" :disabled="true"/>
								</el-form-item>
								<input id="validateCodeButton" @click="sendValidateCode()"   type="button" style="font-size: 12px" value="获取验证码"><br>
							</el-col>
						</el-row>
						<el-row>
							<el-col :span="12">
								<el-form-item label="验证码:"  prop="code">
									<el-input v-model="pwdformData.code" />
								</el-form-item>
							</el-col>
						</el-row>
						<el-row>
							<el-col :span="12">
								<el-form-item label="请输入重置密码:" prop="password" >
									<el-input type="password" v-model="pwdformData.password" />
								</el-form-item>
							</el-col>
						</el-row>
						<el-row>
							<el-col :span="12">
								<el-form-item label="请确认密码:" prop="checkpwd" >
									<el-input type="password" v-model="pwdformData.checkpwd" />
								</el-form-item>
							</el-col>
						</el-row>


					</el-form>
					<div slot="footer" class="dialog-footer">
						<el-button @click="dialogFormVisible4Editpwd = false">取消</el-button>
						<el-button type="primary" @click="handlePwdEdit()">修改</el-button>
					</div>
				</el-dialog>
			</div>
		</div>

	</div>
	<!-- 底部栏位 -->
	<!--页面底部-->
<div class="clearfix footer">
	<div class="py-container">
		<div class="footlink">
			<div class="Mod-service">
				<ul class="Mod-Service-list">
					<li class="grid-service-item intro  intro1">

						<i class="serivce-item fl"></i>
						<div class="service-text">
							<h4>正品保障</h4>
							<p>正品保障，提供发票</p>
						</div>

					</li>
					<li class="grid-service-item  intro intro2">

						<i class="serivce-item fl"></i>
						<div class="service-text">
							<h4>正品保障</h4>
							<p>正品保障，提供发票</p>
						</div>

					</li>
					<li class="grid-service-item intro  intro3">

						<i class="serivce-item fl"></i>
						<div class="service-text">
							<h4>正品保障</h4>
							<p>正品保障，提供发票</p>
						</div>

					</li>
					<li class="grid-service-item  intro intro4">

						<i class="serivce-item fl"></i>
						<div class="service-text">
							<h4>正品保障</h4>
							<p>正品保障，提供发票</p>
						</div>

					</li>
					<li class="grid-service-item intro intro5">

						<i class="serivce-item fl"></i>
						<div class="service-text">
							<h4>正品保障</h4>
							<p>正品保障，提供发票</p>
						</div>

					</li>
				</ul>
			</div>
			<div class="clearfix Mod-list">
				<div class="yui3-g">
					<div class="yui3-u-1-6">
						<h4>购物指南</h4>
						<ul class="unstyled">
							<li>购物流程</li>
							<li>会员介绍</li>
							<li>生活旅行/团购</li>
							<li>常见问题</li>
							<li>购物指南</li>
						</ul>

					</div>
					<div class="yui3-u-1-6">
						<h4>配送方式</h4>
						<ul class="unstyled">
							<li>上门自提</li>
							<li>211限时达</li>
							<li>配送服务查询</li>
							<li>配送费收取标准</li>
							<li>海外配送</li>
						</ul>
					</div>
					<div class="yui3-u-1-6">
						<h4>支付方式</h4>
						<ul class="unstyled">
							<li>货到付款</li>
							<li>在线支付</li>
							<li>分期付款</li>
							<li>邮局汇款</li>
							<li>公司转账</li>
						</ul>
					</div>
					<div class="yui3-u-1-6">
						<h4>售后服务</h4>
						<ul class="unstyled">
							<li>售后政策</li>
							<li>价格保护</li>
							<li>退款说明</li>
							<li>返修/退换货</li>
							<li>取消订单</li>
						</ul>
					</div>
					<div class="yui3-u-1-6">
						<h4>特色服务</h4>
						<ul class="unstyled">
							<li>夺宝岛</li>
							<li>DIY装机</li>
							<li>延保服务</li>
							<li>品优购E卡</li>
							<li>品优购通信</li>
						</ul>
					</div>
					<div class="yui3-u-1-6">
						<h4>帮助中心</h4>
						<img src="img/wx_cz.jpg">
					</div>
				</div>
			</div>
			<div class="Mod-copyright">
				<ul class="helpLink">
					<li>关于我们<span class="space"></span></li>
					<li>联系我们<span class="space"></span></li>
					<li>关于我们<span class="space"></span></li>
					<li>商家入驻<span class="space"></span></li>
					<li>营销中心<span class="space"></span></li>
					<li>友情链接<span class="space"></span></li>
					<li>关于我们<span class="space"></span></li>
					<li>营销中心<span class="space"></span></li>
					<li>友情链接<span class="space"></span></li>
					<li>关于我们</li>
				</ul>
				<p>地址：北京市昌平区建材城西路金燕龙办公楼一层 邮编：100096 电话：400-618-4000 传真：010-82935100</p>
				<p>京ICP备08001421号京公网安备110108007702</p>
			</div>
		</div>
	</div>
</div>


<!--页面底部END-->
</body>
</html>
<script type="text/javascript">
	var cookie1 = cookie.getCookie("Authorization");
	var app=new Vue({
		el:"#app",
		data:{
			collects:[],
			profiles:[],
			pagination: {//分页相关模型数据
				currentPage: 1,//当前页码
				pageSize:4,//每页显示的记录数
				total:0,//总记录数
				queryString:null//查询条件
			},
			autoUpload:true,//自动上传
			imageUrl:null,//模型数据，用于上传图片完成后图片预览
			active1:'active',
			active2:{},
			dialogFormVisible4Edit:false,
			dialogFormVisible4Editpwd:false,
			pwdformData:{
                 code:''
			},
			formData: {
				birthday: ''
			},//表单数据

			rules: {//校验规则
				username: [{ required: true, message: '真实姓名为必填项', trigger: 'blur' }],
				nickName: [{ required: true, message: '昵称为必填项', trigger: 'blur' }],
				sex: [{ required: true, message: '性别为必填项', trigger: 'blur' }],
				birthday: [{ required: true, message: '出生日期为必填项', trigger: 'blur' }],
			},
			pwdrules:{
				code: [{ required: true, message: '请输入验证码', trigger: 'blur' }],
				password: [{ required: true, message: '请输入密码', trigger: 'blur' }],
				checkpwd: [{ required: true, message: '密码不能为空', trigger: 'blur' }],
			},
			flag: true
		},
		created(){
			if(cookie1==null || cookie1==''){
				window.location.href="http://192.168.45.49/login.html?from=http://192.168.45.49/home.html";
			}else {
				this.pagination.currentPage = 1;
				var params = {
					currentPage: 1,
					pageSize: this.pagination.pageSize,
					queryString: this.pagination.queryString
				};
				axios.get("/api/user/collect/" + params.currentPage + "/" + params.pageSize).then((response) => {
					this.collects = response.data.data.list;
					this.pagination.total = response.data.data.total;

				})
			}
		},
		methods: {
			handleAvatarSuccess(res, file) {
				this.imageUrl = res.data;
				this.$message({
					message: res.message,
					type: res.flag ? 'success' : 'error'
				});
				//设置模型数据（图片名称），后续提交ajax请求时会提交到后台最终保存到数据库
				this.formData.headPic = res.data;
			},
			beforeAvatarUpload(file) {
				const isJPG = file.type === 'image/jpeg';
				const isLt2M = file.size / 1024 / 1024 < 2;

				if (!isJPG) {
					this.$message.error('上传头像图片只能是 JPG 格式!');
				}
				if (!isLt2M) {
					this.$message.error('上传头像图片大小不能超过 2MB!');
				}
				return isJPG && isLt2M;
			},
			// 用户收藏
			userCollect() {
				axios.get("/api/user/collect/1/4").then((res => {
					this.collects = res.data.data.list;
					this.pagination.currentPage = 1;
					this.pagination.total = res.data.data.total;

				}))
			},
			// 购物足迹
			footPrint() {

				axios.get("/api/user/footPrint/1/4").then((res => {
					this.profiles = res.data.data.list;
					this.pagination.currentPage = 1;
					this.pagination.total = res.data.data.total;
				}))
			},
			//分页查询
			findPage() {
				this.pagination.currentPage = 1;
				var params = {
					currentPage: 1,
					pageSize: this.pagination.pageSize,
					queryString: this.pagination.queryString
				};
				axios.get("/api/user/collect/" + params.currentPage + "/" + params.pageSize).then((response) => {
					this.collects = response.data.data.list;
					this.pagination.total = response.data.data.total;

				})
			},
			//切换页码
			handleCurrentChange(currentPage) {
				this.pagination.currentPage = currentPage;
				var params = {
					currentPage: currentPage,
					pageSize: this.pagination.pageSize,
					queryString: this.pagination.queryString
				};
				axios.get("/api/user/collect/+" + params.currentPage + "/" + params.pageSize).then((response) => {
					this.collects = response.data.data.list;
					this.pagination.total = response.data.data.total;

				})


			},//切换页码2
			handleCurrentChange2(currentPage) {
				this.pagination.currentPage = currentPage;
				var params = {
					currentPage: currentPage,
					pageSize: this.pagination.pageSize,
					queryString: this.pagination.queryString
				};
				axios.get("/api/user/footPrint/+" + params.currentPage + "/" + params.pageSize).then((response) => {
					this.profiles = response.data.data.list;
					this.pagination.total = response.data.data.total;

				})


			},
			// 弹出添加窗口
			handleCreate() {
				this.formData = {};
				this.flag = true;
				axios.get("/api/user").then((response) => {
					if (response.data.flag) {
						this.dialogFormVisible4Edit = true;
						this.formData = response.data.data;
						this.imageUrl = this.formData.headPic;

					}

				})

			},
			// 用户信息编辑
			handleEdit() {
				this.$refs['dataEditForm'].validate((valid) => {
					if (valid) {

						if (this.flag) {
							axios.post("/api/user", this.formData).then((response) => {
								this.dialogFormVisible4Edit = false;
								if (response.data.flag) {
									this.$message({
										message: response.data.message,
										type: 'success'
									});
								} else {
									this.$message.error("更新失败");
								}

							})
						} else {
							this.$message.error("昵称重复");
						}
					}
				})
			},
			findNickName() {
				axios.get("/api/user/nickName/" + this.formData.nickName).then((response) => {
					if (!response.data.flag) {
						this.$message.error("昵称重复");
						this.flag = false;
					} else {
						this.flag = true;
					}

				})
			},
			// 回显数据
			modifypassword() {
				axios.get("/api/user/").then((response) => {
					if (response.data.flag) {
						this.dialogFormVisible4Editpwd = true;
						this.pwdformData = response.data.data;
						this.pwdformData.password = '';
					} else {
						this.$message.error('网络错误');
					}
				})
			},
			// 修改密码
			handlePwdEdit(){
				this.$refs['pwdEditForm'].validate((valid) => {
					if (valid) {
						if (this.pwdformData.password != this.pwdformData.checkpwd) {
							this.$message.error("俩次输入密码不一致");
						} else if (this.code != this.pwdformData.code) {
							this.$message.error("验证码错误");
						} else {
							axios.put("/api/user/resetlogin", this.pwdformData).then((response) => {
								this.dialogFormVisible4Editpwd = false;
								if (response.data.flag) {
									this.code = '';
									this.$message({
										message: response.data.message,
										type: 'success'
									});
									var url = "http://192.168.45.49/login.html?from="+response.data.data;
									setTimeout("location.href='" + url + "'", 1000);
								} else {
									this.$message.error(response.data.message);
								}

							})
						}
					}
				})
			},
			//发送验证码
			sendValidateCode() {
				validateCodeButton = $("#validateCodeButton")[0];
				clock = window.setInterval(doLoop, 1000); //一秒执行一次
				this.verificationCode();
			},
			// 生成验证码
			verificationCode() {
				var code = "";

				for (var i = 0; i < 6; i++) {

					var radom = Math.floor(Math.random() * 10);

					code += radom;

				}
				this.code = code;
				alert("验证码是" + code);
			},
		},



	})
</script>